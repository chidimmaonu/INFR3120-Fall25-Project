<%- include('../partials/header') %>
<%- include('../partials/nav') %>


<!-- Display Flash Messages -->
<%- include('../partials/messages') %>


<!-- Events Table Section -->
<section class="card">
  <div class="events-header">
    <h1>Events</h1>
    <span class="badge"><%= events.length %> total</span>
  </div>
 
  <% if (events.length === 0) { %>
    <p style="text-align: center; color: #666; padding: 40px 0;">
      <% if (typeof user !== 'undefined' && user) { %>
        No events yet. <a href="/events/create" style="color: var(--primary);">Create your first event</a>
      <% } else { %>
        No events yet. <a href="/auth/login" style="color: var(--primary);">Login to create events</a>
      <% } %>
    </p>
  <% } else { %>
    <table class="table" aria-describedby="events-table">
      <thead>
        <tr>
          <th>Title</th>
          <th>Date</th>
          <th>Location</th>
          <th style="width: 200px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% events.forEach(function(event) { %>
          <tr>
            <td><strong><%= event.title %></strong></td>
            <td><%= new Date(event.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) %></td>
            <td><%= event.location %></td>
            <td>
              <% if (typeof user !== 'undefined' && user) { %>
                <!-- Edit Button -->
                <a href="/events/edit/<%= event._id %>" class="btn btn-ghost">Edit</a>
               
                <!-- Delete Button with red styling -->
                <a href="/events/delete/<%= event._id %>" class="btn btn-ghost delete-link">
                  Delete
                </a>
              <% } else { %>
                <a href="/auth/login" class="btn btn-ghost">Login to Edit</a>
              <% } %>
            </td>
           
          </tr>
        <% }); %>
      </tbody>
    </table>
  <% } %>
</section>


<%- include('../partials/footer') %>